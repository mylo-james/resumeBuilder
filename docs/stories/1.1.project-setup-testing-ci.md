# Story 1.1: Project Setup, Testing, and CI

## Status: Ready for Review

## Story

**As a** developer, **I want** to set up a new Next.js project with a complete testing suite and a GitHub Actions
workflow, **so that** I have a robust, reliable, and automated development environment.

## Acceptance Criteria

1. The project is initialized using a Next.js starter.
2. Testing frameworks for Unit, Integration, and End-to-End (E2E) are installed and configured.
3. A sample unit test is written and passes.
4. A sample E2E test is written and passes.
5. A GitHub Actions workflow is created to run all tests automatically.
6. The GitHub Actions workflow reports a successful build when all tests pass.

## Tasks / Subtasks

- [x] Initialize Next.js project (AC: 1)
  - [x] Create new Next.js app and repository scaffolding
  - [x] Commit initial project structure
  - [x] Confirm project runs locally with `npm run dev`
  - [x] Align source tree to architecture structure [Source:
        architecture/architecture-project-structure.md#unified-project-structure]
- [x] Install and configure testing stack (AC: 2)
  - [x] Add Jest for unit/integration tests [Source: architecture/architecture-tech-stack.md#tech-stack-overview]
  - [x] Add Playwright for E2E tests [Source: architecture/architecture-tech-stack.md#tech-stack-overview]
  - [x] Create `tests/unit`, `tests/integration`, `tests/e2e` directories [Source:
        architecture/architecture-testing-strategy.md#test-file-organization]
  - [x] Add basic config for Jest and Playwright
- [x] Add sample tests and get them passing (AC: 3, 4)
  - [x] Create a trivial unit test that passes under Jest
  - [x] Create a trivial Playwright E2E test that loads the app and asserts a basic selector
  - [x] Ensure both tests pass locally
- [x] Set up CI to run tests (AC: 5, 6)
  - [x] Add GitHub Actions workflow to install deps and run `npm test` and E2E suite [Source:
        architecture/architecture-testing-strategy.md#continuous-integration]
  - [x] Ensure workflow status is green on push/PR when tests pass
- [x] Add helpful npm scripts
  - [x] `test` (unit/integration), `test:e2e` (Playwright), `lint`, `type-check` [Source:
        architecture/architecture-project-structure.md#development-workflow]

## Dev Notes

- Previous Story Insights

  - This is the first story in the project. No previous story insights.

- Data Models

  - No specific guidance found in architecture docs for this story.

- API Specifications

  - No specific guidance found in architecture docs for this story.

- Component Specifications

  - Follow the unified project structure for `src/app/page.tsx` as the main entry point [Source:
    architecture/architecture-project-structure.md#srcapp]

- File Locations

  - Place tests under `tests/unit`, `tests/integration`, and `tests/e2e` as defined [Source:
    architecture/architecture-testing-strategy.md#test-file-organization]

- Testing Requirements

  - Use Jest for unit/integration tests and Playwright for E2E [Source:
    architecture/architecture-tech-stack.md#tech-stack-overview]
  - Maintain a testing pyramid with unit, integration, and E2E coverage [Source:
    architecture/architecture-testing-strategy.md#testing-pyramid-overview]

- Technical Constraints
  - Next.js app router conventions for API routes and project layout [Source:
    architecture/architecture-project-structure.md#file-naming-conventions]
  - CI via GitHub Actions is recommended for automated testing [Source:
    architecture/architecture-testing-strategy.md#continuous-integration]

### Testing

- Test file location: `tests/unit`, `tests/integration`, `tests/e2e` [Source:
  architecture/architecture-testing-strategy.md#test-file-organization]
- Test standards: TDD-first, fast unit tests, meaningful names, 80%+ coverage target [Source:
  architecture/architecture-testing-strategy.md#testing-best-practices]
- Frameworks/patterns: Jest for unit/integration, Playwright for E2E [Source:
  architecture/architecture-tech-stack.md#tech-stack-overview]
- Story-specific: Create minimal passing unit and E2E tests to validate setup (AC: 3, 4)

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |

## Dev Agent Record

### Agent Model Used
- Full Stack Developer (James) - Expert Senior Software Engineer & Implementation Specialist

### Debug Log References
- Story 1.1 implementation completed successfully
- All acceptance criteria met and validated
- Testing stack configured and working
- CI workflow created and ready

### Completion Notes List
- ✅ Next.js project initialized with TypeScript, Tailwind CSS, and ESLint
- ✅ Jest configured for unit/integration tests with proper setup
- ✅ Playwright configured for E2E tests with browser automation
- ✅ Test directories created: tests/unit, tests/integration, tests/e2e
- ✅ Sample unit tests created and passing (3 tests)
- ✅ Sample E2E tests created and passing (6 tests across browsers)
- ✅ GitHub Actions CI workflow created with comprehensive testing
- ✅ All npm scripts added: test, test:watch, test:coverage, test:e2e, test:e2e:ui, type-check
- ✅ ESLint configuration fixed for Next.js compatibility
- ✅ Type checking working correctly
- ✅ Build process validated and working
- ✅ All validations passing: lint, type-check, unit tests, E2E tests

### File List
- package.json (updated with test scripts and dependencies)
- jest.config.cjs (Jest configuration for unit/integration tests)
- jest.setup.js (Jest setup with Next.js mocks)
- playwright.config.ts (Playwright configuration for E2E tests)
- .github/workflows/ci.yml (GitHub Actions CI workflow)
- tests/unit/example.test.ts (Sample unit tests)
- tests/e2e/example.spec.ts (Sample E2E tests)
- eslint.config.js (ESLint configuration for Next.js)

## Critical Dev Flow

1. **Pull latest main**: `git pull origin main`
2. **Create story branch**: `git checkout -b feature/story-1.1-project-setup-testing-ci`
3. **Follow Red-Green-Refactor cycle**:
   - **Red**: Write failing tests first
   - **Green**: Implement minimal code to make tests pass
   - **Refactor**: Clean up code while keeping tests green
4. **Fulfill requirements**: Complete all acceptance criteria
5. **Verify quality**:
   - Run tests: `npm test && npm run test:e2e`
   - Run linting: `npm run lint`
   - Run type checking: `npm run type-check`
6. **Commit and push**: `git push origin feature/story-1.1-project-setup-testing-ci`
7. **Create PR**: Submit pull request for review
8. **Monitor CI**: Use `gh pr checks` to watch CI status and ensure all checks pass

## QA Results
